<template>
  <div id="app" class="noselect" ref='app'>
    <div class="container">
      <!--头部-->
      <h3 v-text="title" class="app_title"></h3>
      <!--视图区-->
      <div id="renderCanvas"></div>
    </div>
    <!--侧边按钮区-->
    <div class="app_aside">
      <div id="renderCanvas2"> </div>
      <!-- <div class="pause" @click='pause'>暂停</div> -->
      <!--重制按钮-->
      <ui-btn type="reset1" class="aside_reset" @click.native='reset'></ui-btn>
      <!--清除浮动-->
      <div class="btn_space" id="btn_space">
        <div class="top">
          <ui-btn :type="isBlue==1?'blue':''" size="big" @click.native="choose(1)">从高能级向低能级跃迁</ui-btn>
          <ui-btn :type="isBlue==2?'blue':''" size="big" @click.native="choose(2)">从低能级向高能级跃迁</ui-btn>
          <ui-btn type="radio" v-if="isBlue==2" v-model="radio_checked1" :height="44"> 光照 </ui-btn>
          <ui-btn type="radio" v-if="isBlue==2" v-model="radio_checked2" :width="98" :height="44"> 实物粒子 </ui-btn>
          <div class="slider2-wrap bg" v-if="radio_checked2">
            <div class="text">速度</div>
            <ui-slider class="slider2" v-model="value3" :speed="0" :min="0" :max="100" :tooltip="false" :boxHeight='48'></ui-slider>
          </div>
        </div>
        <div class="bottom" :style="{opacity:hiddenCtrl}">
          <div class="explain" v-show="!isHidden">请输入1-4之间的整数</div>
          <div class="btn play" @click='action'> <img src="static/UI/play.png" v-if="isPause"><img src="static/UI/pause.png" v-if="!isPause"> </div>
          <!-- <div class="btn pause" @click='pause'> <img src="static/UI/pause.png"> </div> -->
          <div class="inputWrap" :class='{keyhack:hiddenCtrl==0}'>
            <div class='bg'> <span>初始</span>
              <input type="tel" name="" maxlength="1" v-model='input1' ref='input1'> </div>
            <div class='bg'> <span>终态</span>
              <input type="tel" name="" maxlength="1" v-model='input2' ref='input2'> </div>
          </div>
          <div class="spectrum bg" v-if="!radio_checked2">
            <div class="title">光谱</div>
            <div class="linearWarp">
              <div class="line" v-if="isShowLine" :style="{left:left}"></div>
              <div class="linear" :style="{opacity: radio_checked1?1:0}"></div>
            </div>
            <div class="lineArrow"> </div>
            <div class="number"> <span>50</span> <span>2000</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
import uiHead from '@/components/UI/uiHead'; //头部
import uiBtn from '@/components/UI/uiBtn'; //按钮
import uiSlider from '@/components/UI/uiSlider'; //滑条
import common from '@/common/common';
const {
  sin,
  cos,
  tan,
  PI
} = Math;
const H = 4.14 * Math.pow(10, -15);
const C = 3 * Math.pow(10, 8); //H和C均为数学常量
const arrE = [0, -13.6, -3.4, -1.51, -0.85]; //能级大小
const ELECTRONIC_RADIUS = 4; //电子半径
const lightPosX = -550; //灯光位置
const SUBJION = 5; //用于粒子运动速度和与能级差比较的系数
export default {
  name: 'app',
  components: {
    uiHead,
    uiBtn,
    uiSlider
  },
  data() {
    return {
      title: '能级跃迁',
      value3: 0,
      isBlue: 1,
      radio_checked1: false,
      radio_checked2: false,
      pre_radio_checked: 0,
      input1: '',
      input2: '',
      level: 0,
      timer: null,
      isShowLine: false,
      left: '0',
      rub: 1, //粒子速度变慢的摩擦系数
      timerLizi: null,
      hiddenCtrl: 1,
      isPause: false,
      isHidden: false
    }
  },
  created() {
    document.title = this.title;
    let colors = [33, 0, 0, 34, 0, 0, 35, 0, 0, 36, 0, 0, 36, 0, 0, 38, 0, 0, 38, 0, 0, 39, 0, 0, 39, 0, 0, 41, 0, 0, 41, 0, 0, 42, 1, 0, 43, 0, 0, 44, 1, 0, 44, 0, 0, 46, 1, 0, 46, 0, 0, 47, 1, 0, 48, 0, 0, 49, 1, 0, 49, 0, 0, 50, 1, 0, 51, 0, 0,
      52, 1, 0, 52, 0, 0, 54, 1, 0, 54, 0, 0, 55, 1, 0, 56, 1, 0, 57, 1, 0, 57, 1, 0, 59, 1, 0, 59, 1, 0, 60, 1, 0, 60, 1, 0, 62, 1, 0, 62, 1, 0, 63, 1, 0, 64, 1, 0, 65, 1, 0, 65, 1, 0, 67, 1, 0, 67, 1, 0, 68, 2, 0, 69, 1, 0, 70, 2, 0, 70, 1, 0,
      71, 2, 0, 72, 1, 0, 73, 2, 0, 73, 1, 0, 75, 2, 0, 75, 1, 0, 76, 2, 0, 77, 1, 0, 78, 2, 0, 78, 1, 0, 80, 2, 0, 80, 2, 0, 81, 2, 0, 81, 2, 0, 83, 2, 0, 83, 2, 0, 84, 2, 0, 85, 2, 0, 86, 2, 0, 86, 2, 0, 88, 2, 0, 88, 2, 0, 89, 2, 0, 89, 2, 0,
      91, 2, 0, 91, 2, 0, 92, 3, 0, 93, 2, 0, 94, 3, 0, 94, 2, 0, 96, 3, 0, 96, 2, 0, 97, 3, 0, 98, 2, 0, 99, 3, 0, 99, 2, 0, 100, 3, 0, 101, 2, 0, 102, 3, 0, 102, 2, 0, 104, 3, 0, 104, 3, 0, 105, 3, 0, 106, 3, 0, 107, 3, 0, 107, 3, 0, 109, 3, 0,
      109, 3, 0, 110, 3, 0, 110, 3, 0, 112, 3, 0, 112, 3, 0, 113, 3, 0, 114, 3, 0, 115, 3, 0, 115, 3, 0, 117, 4, 0, 117, 3, 0, 118, 4, 0, 119, 3, 0, 120, 4, 0, 120, 3, 0, 121, 4, 0, 122, 3, 0, 123, 4, 0, 123, 3, 0, 125, 4, 0, 125, 3, 0, 126, 4, 0,
      127, 3, 0, 128, 4, 0, 128, 3, 0, 130, 4, 0, 130, 4, 0, 131, 4, 0, 131, 4, 0, 133, 4, 0, 133, 4, 0, 134, 4, 0, 135, 4, 0, 136, 4, 0, 136, 4, 0, 138, 4, 0, 138, 4, 0, 139, 4, 0, 139, 4, 0, 141, 4, 0, 141, 4, 0, 142, 5, 0, 143, 4, 0, 144, 5, 0,
      144, 4, 0, 146, 5, 0, 146, 4, 0, 147, 5, 0, 148, 4, 0, 149, 5, 0, 149, 4, 0, 150, 5, 0, 151, 4, 0, 152, 5, 0, 152, 4, 0, 154, 5, 0, 154, 5, 0, 155, 5, 0, 156, 5, 0, 157, 5, 0, 157, 5, 0, 159, 5, 0, 159, 5, 0, 160, 5, 0, 160, 5, 0, 162, 5, 0,
      162, 5, 0, 163, 5, 0, 164, 5, 0, 165, 5, 0, 165, 5, 0, 167, 6, 0, 167, 5, 0, 168, 6, 0, 169, 5, 0, 170, 6, 0, 170, 5, 0, 171, 6, 0, 172, 5, 0, 173, 6, 0, 173, 5, 0, 175, 6, 0, 175, 5, 0, 176, 6, 0, 177, 5, 0, 178, 6, 0, 178, 6, 0, 180, 6, 0,
      180, 6, 0, 181, 6, 0, 181, 6, 0, 183, 6, 0, 183, 6, 0, 184, 6, 0, 185, 6, 0, 186, 6, 0, 186, 6, 0, 188, 6, 0, 188, 6, 0, 189, 6, 0, 189, 6, 0, 191, 7, 0, 191, 6, 0, 192, 7, 0, 193, 6, 0, 194, 7, 0, 194, 6, 0, 196, 7, 0, 196, 6, 0, 197, 7, 0,
      198, 6, 0, 199, 7, 0, 199, 6, 0, 200, 7, 0, 201, 6, 0, 202, 7, 0, 202, 6, 0, 204, 7, 0, 204, 7, 0, 205, 7, 0, 206, 7, 0, 206, 8, 0, 206, 8, 0, 207, 9, 0, 206, 9, 0, 207, 10, 0, 207, 10, 0, 208, 12, 0, 207, 12, 0, 208, 13, 0, 208, 13, 0, 208,
      14, 0, 208, 14, 0, 209, 15, 0, 209, 15, 0, 209, 17, 0, 209, 17, 0, 210, 18, 0, 209, 18, 0, 210, 19, 0, 210, 19, 0, 211, 20, 0, 210, 20, 0, 211, 22, 0, 211, 22, 0, 211, 23, 0, 211, 23, 0, 212, 24, 0, 211, 24, 0, 212, 25, 0, 212, 26, 0, 213,
      27, 0, 212, 27, 0, 213, 28, 0, 213, 28, 0, 213, 29, 0, 213, 29, 0, 214, 30, 0, 214, 31, 0, 214, 32, 0, 214, 32, 0, 215, 33, 0, 214, 33, 0, 215, 34, 0, 215, 34, 0, 216, 35, 0, 215, 36, 0, 216, 37, 0, 216, 37, 0, 216, 38, 0, 216, 38, 0, 217,
      39, 0, 217, 39, 0, 217, 40, 0, 217, 41, 0, 218, 42, 0, 217, 42, 0, 218, 43, 0, 218, 43, 0, 219, 44, 0, 218, 44, 0, 219, 46, 0, 219, 46, 0, 219, 47, 0, 219, 47, 0, 220, 48, 0, 219, 48, 0, 220, 49, 0, 220, 49, 0, 221, 51, 0, 220, 51, 0, 221,
      52, 0, 221, 52, 0, 221, 53, 0, 221, 53, 0, 222, 54, 0, 222, 54, 0, 222, 56, 0, 222, 56, 0, 223, 57, 0, 222, 57, 0, 223, 58, 1, 223, 58, 0, 224, 59, 1, 223, 59, 0, 224, 61, 1, 224, 61, 0, 224, 62, 1, 224, 62, 0, 225, 63, 1, 225, 63, 0, 225,
      64, 1, 225, 65, 0, 226, 66, 1, 225, 66, 0, 226, 67, 1, 226, 67, 0, 226, 68, 1, 226, 68, 0, 227, 69, 1, 227, 70, 0, 227, 71, 1, 227, 71, 0, 228, 72, 1, 227, 72, 0, 228, 73, 1, 228, 73, 0, 229, 74, 1, 228, 75, 0, 229, 76, 1, 229, 76, 0, 229,
      77, 1, 229, 77, 0, 230, 78, 1, 230, 78, 0, 230, 80, 1, 230, 80, 0, 231, 81, 1, 230, 81, 0, 231, 82, 1, 231, 82, 0, 232, 83, 1, 231, 83, 0, 232, 85, 1, 232, 85, 0, 232, 86, 1, 232, 86, 0, 233, 87, 1, 232, 87, 0, 233, 88, 1, 233, 88, 0, 234,
      90, 1, 233, 90, 0, 234, 91, 1, 234, 91, 0, 234, 92, 1, 234, 92, 0, 235, 93, 1, 235, 93, 0, 235, 95, 1, 235, 95, 0, 236, 96, 1, 235, 96, 0, 236, 97, 1, 236, 97, 0, 237, 98, 1, 236, 99, 0, 237, 100, 1, 237, 100, 0, 237, 101, 1, 237, 101, 0,
      238, 102, 1, 238, 102, 0, 238, 103, 1, 238, 104, 0, 239, 105, 1, 238, 105, 0, 239, 106, 1, 239, 106, 0, 239, 107, 1, 239, 107, 0, 240, 108, 1, 240, 109, 0, 240, 110, 1, 240, 110, 0, 241, 111, 1, 240, 111, 0, 241, 112, 1, 241, 112, 0, 242,
      113, 1, 241, 114, 0, 242, 115, 1, 242, 115, 0, 242, 116, 1, 242, 116, 0, 243, 117, 1, 243, 117, 0, 243, 119, 1, 243, 119, 0, 244, 120, 1, 243, 120, 0, 244, 121, 1, 244, 121, 0, 245, 122, 1, 244, 122, 0, 245, 124, 1, 245, 124, 0, 245, 125, 1,
      245, 125, 1, 246, 126, 1, 245, 126, 1, 246, 127, 1, 246, 127, 1, 247, 129, 1, 246, 129, 1, 247, 130, 1, 247, 130, 1, 247, 131, 1, 247, 131, 1, 248, 132, 1, 248, 132, 1, 248, 134, 1, 248, 134, 1, 249, 135, 1, 248, 135, 1, 249, 136, 1, 249,
      136, 1, 250, 137, 1, 249, 138, 1, 250, 139, 1, 250, 139, 1, 250, 140, 1, 250, 140, 1, 251, 141, 1, 251, 141, 1, 251, 142, 1, 251, 142, 1, 251, 143, 1, 251, 143, 1, 251, 144, 1, 251, 144, 1, 251, 145, 1, 251, 145, 1, 251, 146, 1, 251, 146, 1,
      251, 147, 1, 251, 147, 1, 251, 148, 1, 251, 148, 1, 251, 149, 1, 251, 149, 1, 251, 150, 1, 251, 150, 1, 251, 151, 1, 251, 151, 1, 252, 152, 1, 251, 152, 1, 252, 153, 1, 251, 153, 1, 252, 154, 1, 251, 154, 1, 252, 155, 1, 251, 155, 0, 252,
      156, 1, 251, 156, 0, 252, 157, 1, 251, 157, 0, 252, 158, 1, 251, 158, 0, 252, 159, 1, 251, 159, 0, 252, 160, 1, 251, 160, 0, 252, 161, 1, 251, 161, 0, 252, 162, 1, 251, 162, 0, 252, 163, 1, 251, 163, 0, 252, 164, 1, 251, 164, 0, 252, 165, 1,
      252, 165, 0, 252, 166, 1, 252, 166, 0, 252, 167, 1, 252, 167, 0, 252, 168, 1, 252, 168, 0, 252, 169, 1, 252, 169, 0, 252, 170, 1, 252, 170, 0, 252, 171, 1, 252, 171, 0, 252, 172, 1, 252, 172, 0, 252, 173, 1, 252, 173, 0, 252, 174, 1, 252,
      174, 0, 252, 175, 1, 252, 175, 0, 252, 176, 1, 252, 176, 0, 252, 177, 1, 252, 177, 0, 252, 178, 1, 252, 178, 0, 253, 179, 1, 252, 179, 0, 253, 180, 1, 252, 180, 0, 253, 181, 1, 252, 181, 0, 253, 182, 1, 252, 182, 0, 253, 183, 1, 252, 183, 0,
      253, 184, 1, 252, 184, 0, 253, 185, 1, 252, 185, 0, 253, 186, 1, 252, 186, 0, 253, 187, 1, 252, 187, 0, 253, 188, 1, 252, 188, 0, 253, 189, 1, 252, 189, 0, 253, 190, 1, 252, 190, 0, 253, 191, 1, 252, 191, 0, 253, 192, 1, 253, 192, 0, 253,
      193, 1, 253, 193, 0, 253, 194, 1, 253, 194, 0, 253, 195, 1, 253, 195, 0, 253, 196, 1, 253, 196, 0, 253, 197, 1, 253, 197, 0, 253, 198, 1, 253, 198, 0, 253, 199, 1, 253, 199, 0, 253, 200, 1, 253, 200, 0, 253, 201, 1, 253, 201, 0, 253, 202, 1,
      253, 202, 0, 253, 203, 1, 253, 203, 0, 253, 204, 1, 253, 204, 0, 253, 205, 1, 253, 205, 0, 254, 206, 1, 253, 206, 0, 254, 207, 1, 253, 207, 0, 254, 208, 1, 253, 208, 0, 254, 209, 0, 253, 209, 0, 254, 210, 0, 253, 210, 0, 254, 211, 0, 253,
      211, 0, 254, 212, 0, 253, 212, 0, 254, 213, 0, 253, 213, 0, 254, 214, 0, 253, 214, 0, 254, 215, 0, 253, 215, 0, 254, 216, 0, 253, 216, 0, 254, 217, 0, 253, 217, 0, 254, 218, 0, 253, 218, 0, 254, 219, 0, 254, 219, 0, 254, 220, 0, 254, 220, 0,
      254, 221, 0, 254, 221, 0, 254, 222, 0, 254, 222, 0, 254, 223, 0, 254, 223, 0, 254, 224, 0, 254, 224, 0, 254, 225, 0, 254, 225, 0, 254, 226, 0, 254, 226, 0, 254, 227, 0, 254, 227, 0, 254, 228, 0, 254, 228, 0, 254, 229, 0, 254, 229, 0, 254,
      230, 0, 254, 230, 0, 254, 231, 0, 254, 231, 0, 254, 232, 0, 254, 232, 0, 255, 233, 0, 254, 233, 0, 255, 234, 0, 254, 234, 0, 255, 235, 0, 254, 235, 0, 255, 236, 0, 254, 236, 0, 255, 237, 0, 254, 237, 0, 255, 238, 0, 254, 238, 0, 255, 239, 0,
      254, 239, 0, 255, 240, 0, 254, 240, 0, 255, 241, 0, 254, 241, 0, 255, 242, 0, 254, 242, 0, 255, 243, 0, 254, 243, 0, 255, 244, 0, 254, 244, 0, 255, 245, 0, 254, 245, 0, 255, 246, 0, 255, 246, 0, 255, 247, 0, 255, 247, 0, 255, 248, 0, 255,
      248, 0, 255, 249, 0, 253, 248, 0, 253, 248, 0, 251, 248, 0, 250, 248, 0, 249, 247, 0, 248, 247, 0, 246, 246, 0, 246, 246, 0, 244, 245, 0, 243, 246, 0, 242, 245, 0, 241, 245, 1, 239, 244, 0, 238, 244, 1, 237, 243, 0, 236, 243, 1, 234, 243, 0,
      234, 243, 1, 232, 242, 0, 231, 242, 1, 230, 241, 0, 229, 241, 1, 227, 240, 0, 227, 241, 1, 225, 240, 0, 224, 240, 1, 223, 239, 1, 222, 239, 1, 220, 238, 1, 219, 238, 1, 218, 238, 1, 217, 238, 1, 215, 237, 1, 215, 237, 1, 213, 236, 1, 212,
      236, 1, 211, 236, 1, 210, 236, 1, 208, 235, 1, 208, 235, 1, 206, 234, 1, 205, 234, 1, 204, 233, 1, 203, 234, 2, 201, 233, 1, 200, 233, 2, 199, 232, 1, 198, 232, 2, 196, 231, 1, 196, 231, 2, 194, 231, 1, 193, 231, 2, 192, 230, 1, 191, 230, 2,
      189, 229, 1, 189, 229, 2, 187, 228, 1, 186, 229, 2, 184, 228, 2, 184, 228, 2, 182, 227, 2, 181, 227, 2, 180, 226, 2, 179, 226, 2, 177, 226, 2, 177, 226, 2, 175, 225, 2, 174, 225, 2, 173, 224, 2, 172, 224, 2, 170, 223, 2, 170, 224, 2, 168,
      223, 2, 167, 223, 3, 165, 222, 2, 165, 222, 3, 163, 221, 2, 162, 221, 3, 161, 221, 2, 160, 221, 3, 158, 220, 2, 158, 220, 3, 156, 219, 2, 155, 219, 3, 154, 219, 2, 153, 219, 3, 151, 218, 2, 151, 218, 3, 149, 217, 3, 148, 217, 3, 146, 216, 3,
      146, 217, 3, 144, 216, 3, 143, 216, 3, 142, 215, 3, 141, 215, 3, 139, 214, 3, 139, 214, 3, 137, 214, 3, 136, 214, 3, 135, 213, 3, 134, 213, 3, 132, 212, 3, 131, 212, 4, 130, 211, 3, 129, 212, 4, 127, 211, 3, 127, 211, 4, 125, 210, 3, 124,
      210, 4, 123, 209, 3, 122, 209, 4, 120, 209, 3, 120, 209, 4, 118, 208, 3, 117, 208, 4, 116, 207, 3, 115, 207, 4, 113, 206, 4, 112, 207, 4, 111, 206, 4, 110, 206, 4, 108, 205, 4, 108, 205, 4, 106, 204, 4, 105, 204, 4, 104, 204, 4, 103, 204, 4,
      101, 203, 4, 101, 203, 4, 99, 202, 4, 98, 202, 4, 97, 202, 4, 96, 202, 4, 94, 201, 4, 93, 201, 5, 92, 200, 4, 91, 200, 5, 89, 199, 4, 89, 200, 5, 87, 199, 4, 86, 199, 5, 85, 198, 4, 84, 198, 5, 82, 197, 4, 82, 197, 5, 80, 197, 4, 79, 197, 5,
      77, 196, 4, 77, 196, 5, 75, 195, 5, 74, 195, 5, 73, 194, 5, 72, 195, 5, 70, 194, 5, 70, 194, 5, 68, 193, 5, 67, 193, 5, 66, 192, 5, 65, 192, 5, 63, 192, 5, 63, 192, 5, 61, 191, 5, 60, 191, 5, 58, 190, 5, 58, 190, 6, 56, 189, 5, 55, 190, 6,
      54, 189, 5, 53, 189, 6, 51, 188, 5, 51, 188, 6, 49, 187, 5, 48, 187, 6, 47, 187, 5, 46, 187, 6, 44, 186, 5, 44, 186, 6, 42, 185, 5, 41, 185, 6, 39, 184, 6, 39, 185, 6, 37, 184, 6, 36, 184, 6, 35, 183, 6, 34, 183, 6, 32, 182, 6, 32, 183, 6,
      30, 182, 6, 29, 182, 6, 28, 181, 6, 27, 181, 6, 25, 180, 6, 24, 180, 6, 23, 180, 6, 22, 180, 7, 20, 179, 6, 20, 179, 7, 18, 178, 6, 17, 178, 7, 16, 177, 6, 15, 178, 7, 13, 177, 6, 13, 177, 7, 11, 176, 6, 10, 176, 7, 9, 175, 6, 8, 175, 7, 6,
      175, 6, 5, 175, 7, 4, 174, 7, 3, 174, 7, 1, 173, 7, 1, 173, 7, 0, 172, 7, 0, 173, 9, 0, 172, 9, 0, 172, 11, 0, 171, 12, 0, 171, 13, 0, 171, 14, 0, 171, 15, 0, 170, 16, 0, 170, 18, 0, 169, 18, 0, 169, 20, 0, 169, 21, 0, 169, 22, 0, 168, 23, 0,
      168, 24, 0, 167, 25, 0, 168, 27, 0, 167, 27, 0, 167, 29, 0, 166, 29, 0, 166, 31, 0, 165, 32, 0, 166, 33, 0, 165, 34, 0, 165, 36, 0, 164, 36, 0, 164, 38, 0, 164, 38, 0, 164, 40, 0, 163, 41, 0, 163, 42, 0, 162, 43, 0, 163, 44, 0, 162, 45, 0,
      162, 47, 0, 161, 47, 0, 161, 49, 0, 160, 50, 0, 161, 51, 0, 160, 52, 0, 160, 53, 0, 159, 54, 0, 159, 56, 0, 159, 56, 0, 159, 58, 0, 158, 58, 0, 158, 60, 0, 157, 61, 0, 157, 62, 0, 157, 63, 0, 157, 65, 0, 156, 65, 0, 156, 67, 0, 155, 67, 0,
      156, 69, 0, 155, 70, 0, 155, 71, 0, 154, 72, 0, 154, 73, 0, 153, 74, 0, 154, 76, 0, 153, 76, 0, 153, 78, 0, 152, 78, 0, 152, 80, 0, 152, 81, 0, 152, 82, 0, 151, 83, 0, 151, 85, 0, 150, 85, 0, 150, 87, 0, 150, 87, 0, 150, 89, 0, 149, 90, 0,
      149, 91, 0, 148, 92, 0, 149, 93, 0, 148, 94, 0, 148, 96, 0, 147, 96, 1, 147, 98, 0, 146, 99, 1, 147, 100, 0, 146, 101, 1, 146, 102, 0, 145, 103, 1, 145, 105, 0, 145, 105, 1, 145, 107, 0, 144, 107, 1, 144, 109, 0, 143, 110, 1, 143, 111, 0,
      143, 112, 1, 143, 114, 0, 142, 114, 1, 142, 116, 0, 141, 116, 1, 142, 118, 0, 141, 119, 1, 141, 120, 0, 140, 121, 1, 140, 122, 0, 139, 123, 1, 140, 125, 0, 139, 125, 1, 139, 127, 0, 138, 128, 1, 138, 129, 0, 138, 130, 1, 138, 131, 0, 137,
      132, 1, 137, 134, 0, 136, 134, 1, 137, 136, 0, 136, 136, 1, 136, 138, 0, 135, 139, 1, 135, 140, 0, 134, 141, 1, 135, 143, 0, 134, 143, 1, 134, 145, 0, 133, 145, 1, 133, 147, 0, 133, 148, 1, 133, 149, 0, 132, 150, 1, 132, 151, 0, 131, 152, 1,
      131, 154, 0, 131, 154, 1, 131, 156, 0, 130, 156, 1, 130, 158, 0, 129, 159, 1, 130, 160, 0, 129, 161, 1, 129, 163, 0, 128, 163, 1, 128, 165, 0, 127, 165, 1, 128, 167, 0, 127, 168, 1, 127, 169, 0, 126, 170, 1, 126, 171, 0, 126, 172, 1, 126,
      174, 0, 125, 174, 1, 125, 176, 0, 124, 177, 1, 124, 178, 0, 124, 179, 1, 124, 180, 0, 123, 181, 1, 123, 183, 0, 122, 183, 1, 123, 185, 0, 122, 185, 1, 122, 187, 0, 121, 188, 1, 121, 189, 0, 120, 190, 1, 121, 192, 0, 120, 192, 1, 120, 194, 0,
      119, 194, 1, 119, 196, 0, 119, 197, 1, 119, 198, 0, 118, 199, 1, 118, 200, 0, 117, 201, 1, 117, 203, 0, 117, 203, 1, 117, 205, 0, 116, 206, 1, 116, 207, 0, 115, 208, 1, 116, 209, 0, 115, 210, 1, 115, 212, 0, 114, 212, 1, 114, 214, 0, 114,
      214, 1, 114, 216, 1, 113, 217, 1, 113, 218, 1, 112, 219, 1, 112, 220, 1, 112, 221, 1, 112, 223, 1, 111, 223, 1, 111, 225, 1, 110, 226, 1, 111, 227, 1, 110, 228, 1, 110, 229, 1, 109, 230, 1, 109, 232, 1, 108, 232, 1, 109, 234, 1, 108, 234, 1,
      108, 236, 1, 107, 237, 1, 107, 238, 1, 107, 239, 1, 107, 241, 1, 106, 241, 1, 106, 243, 1, 105, 243, 1, 105, 245, 1, 105, 246, 1, 105, 245, 1, 104, 244, 1, 104, 244, 1, 103, 243, 1, 104, 243, 1, 103, 242, 1, 103, 242, 1, 102, 241, 1, 102,
      240, 1, 102, 239, 1, 102, 239, 1, 101, 238, 1, 101, 238, 1, 100, 237, 2, 101, 237, 1, 100, 235, 2, 100, 235, 1, 99, 234, 2, 99, 234, 1, 99, 233, 2, 99, 233, 1, 98, 232, 2, 98, 232, 1, 97, 230, 2, 98, 230, 1, 97, 229, 2, 97, 229, 1, 96, 228,
      2, 96, 228, 1, 96, 227, 2, 96, 226, 2, 95, 225, 2, 95, 225, 2, 94, 224, 2, 95, 224, 2, 94, 223, 2, 94, 223, 2, 93, 222, 2, 93, 221, 2, 93, 220, 2, 93, 220, 2, 92, 219, 2, 92, 219, 2, 91, 218, 2, 92, 218, 2, 91, 216, 2, 91, 216, 2, 90, 215, 2,
      91, 215, 2, 90, 214, 3, 90, 214, 2, 89, 213, 3, 89, 213, 2, 89, 211, 3, 89, 211, 2, 88, 210, 3, 88, 210, 2, 87, 209, 3, 88, 209, 2, 87, 208, 3, 87, 207, 2, 86, 206, 3, 86, 206, 2, 86, 205, 3, 86, 205, 2, 85, 204, 3, 85, 204, 3, 84, 203, 3,
      85, 202, 3, 84, 201, 3, 84, 201, 3, 83, 200, 3, 83, 200, 3, 83, 199, 3, 83, 199, 3, 82, 197, 3, 82, 197, 3, 81, 196, 3, 82, 196, 3, 81, 195, 3, 81, 195, 3, 80, 194, 3, 80, 194, 3, 80, 192, 4, 80, 192, 3, 79, 191, 4, 79, 191, 3, 78, 190, 4,
      79, 190, 3, 78, 189, 4, 78, 188, 3, 77, 187, 4, 77, 187, 3, 77, 186, 4, 77, 186, 3, 76, 185, 4, 76, 185, 3, 75, 183, 4, 76, 183, 3, 75, 182, 4, 75, 182, 3, 74, 181, 4, 74, 181, 4, 74, 180, 4, 74, 180, 4, 73, 178, 4, 73, 178, 4, 72, 177, 4,
      73, 177, 4, 72, 176, 4, 72, 176, 4, 71, 175, 4, 71, 174, 4, 71, 173, 4, 71, 173, 4, 70, 172, 4, 70, 172, 4, 69, 171, 4, 70, 171, 4, 69, 170, 5, 69, 169, 4, 68, 168, 5, 68, 168, 4, 68, 167, 5, 68, 167, 4, 67, 166, 5, 67, 166, 4, 66, 164, 5,
      67, 164, 4, 66, 163, 5, 66, 163, 4, 65, 162, 5, 65, 162, 4, 65, 161, 5, 65, 161, 4, 64, 159, 5, 64, 159, 4, 63, 158, 5, 64, 158, 5, 63, 157, 5, 63, 157, 5, 62, 156, 5, 62, 155, 5, 62, 154, 5, 62, 154, 5, 61, 153, 5, 61, 153, 5, 60, 152, 5,
      61, 152, 5, 60, 151, 5, 60, 150, 5, 59, 149, 5, 59, 149, 5, 59, 148, 5, 59, 148, 5, 58, 147, 6, 58, 147, 5, 57, 145, 6, 58, 145, 5, 57, 144, 6, 57, 144, 5, 56, 143, 6, 56, 143, 5, 56, 142, 6, 56, 142, 5, 55, 140, 6, 55, 140, 5, 54, 139, 6,
      55, 139, 5, 54, 138, 6, 54, 138, 5, 53, 137, 6, 54, 136, 5, 53, 135, 6, 53, 135, 6, 52, 134, 6, 52, 134, 6, 52, 133, 6, 52, 133, 6, 51, 131, 6, 51, 131, 6, 50, 130, 6, 51, 130, 6, 50, 129, 6, 50, 129, 6, 49, 128, 6, 49, 128, 6, 49, 126, 6,
      49, 126, 6, 48, 125, 6, 48, 125, 6, 47, 124, 7, 48, 124, 6, 47, 123, 7, 47, 122, 6, 46, 121, 7, 46, 121, 6, 46, 120, 7, 46, 120, 6, 45, 119, 7, 45, 119, 6, 44, 118, 7, 45, 117, 6, 44, 116, 7, 44, 116, 6, 43, 115, 7, 43, 115, 6, 43, 114, 7,
      43, 114, 6, 42, 112, 7, 42, 112, 7, 41, 111, 7, 42, 111, 7, 41, 110, 7, 41, 110, 7, 40, 110, 8, 41, 111, 8, 40, 110, 9, 40, 111, 9, 40, 111, 10, 40, 111, 10, 39, 111, 11, 40, 112, 11, 39, 112, 12, 39, 112, 12, 39, 112, 13, 39, 113, 13, 38,
      112, 14, 39, 113, 14, 38, 113, 15, 38, 113, 14, 38, 113, 15, 38, 114, 15, 37, 114, 16, 38, 114, 16, 37, 114, 17, 37, 115, 17, 37, 114, 18, 37, 115, 18, 36, 115, 19, 37, 115, 19, 36, 115, 20, 36, 116, 20, 36, 116, 21, 36, 116, 21, 35, 116, 22,
      36, 117, 22, 35, 116, 23, 35, 117, 23, 35, 117, 23, 35, 117, 23, 34, 117, 24, 35, 118, 24, 34, 118, 25, 34, 118, 25, 34, 118, 26, 34, 119, 26, 33, 118, 27, 34, 119, 27, 33, 119, 28, 33, 119, 28, 33, 119, 29, 33, 120, 29, 32, 120, 30, 33, 120,
      30, 32, 120, 31, 32, 121, 31, 32, 120, 32, 32, 121, 31, 31, 121, 32, 32, 121, 32, 31, 121, 33, 31, 122, 33, 31, 122, 34, 31, 122, 34, 30, 122, 35, 31, 123, 35, 30, 122, 36, 30, 123, 36, 30, 123, 37, 30, 123, 37, 29, 123, 38, 30, 124, 38, 29,
      124, 39, 29, 124, 39, 29, 124, 40, 29, 125, 40, 28, 124, 40, 29, 125, 40, 28, 125, 41, 28, 125, 41, 28, 125, 42, 28, 126, 42, 27, 126, 43, 28, 126, 43, 27, 126, 44, 27, 127, 44, 27, 126, 45, 27, 127, 45, 26, 127, 46, 27, 127, 46, 26, 127, 47,
      26, 128, 47, 26, 128, 48, 26, 128, 48, 25, 128, 49, 26, 129, 48, 25, 128, 49, 25, 129, 49, 25, 129, 50, 25, 129, 50, 24, 129, 51, 25, 130, 51, 24, 130, 52, 24, 130, 52, 24, 130, 53, 24, 131, 53, 23, 130, 54, 24, 131, 54, 23, 131, 55, 23, 131,
      55, 23, 131, 56, 23, 132, 56, 22, 132, 57, 23, 132, 57, 22, 132, 57, 22, 133, 57, 22, 132, 58, 22, 133, 58, 21, 133, 59, 22, 133, 59, 21, 133, 60, 21, 134, 60, 21, 134, 61, 21, 134, 61, 20, 134, 62, 21, 135, 62, 20, 134, 63, 20, 135, 63, 20,
      135, 64, 20, 135, 64, 19, 135, 65, 20, 136, 65, 19, 136, 66, 19, 136, 65, 19, 136, 66, 19, 137, 66, 18, 136, 67, 19, 137, 67, 18, 137, 68, 18, 137, 68, 18, 137, 69, 18, 138, 69, 17, 138, 70, 18, 138, 70, 17, 138, 71, 17, 139, 71, 17, 138, 72,
      17, 139, 72, 16, 139, 73, 17, 139, 73, 16, 139, 74, 16, 140, 74, 16, 140, 74, 16, 140, 74, 15, 140, 75, 16, 141, 75, 15, 140, 76, 15, 141, 76, 15, 141, 77, 15, 141, 77, 14, 141, 78, 15, 142, 78, 14, 142, 79, 14, 142, 79, 14, 142, 80, 14, 143,
      80, 13, 142, 81, 14, 143, 81, 13, 143, 82, 13, 144, 82, 13, 143, 83, 13, 144, 82, 12, 144, 83, 13, 144, 83, 12, 144, 84, 12, 145, 84, 12, 144, 85, 12, 145, 85, 11, 145, 86, 12, 146, 86, 11, 145, 87, 11, 146, 87, 10, 146, 88, 11, 146, 88, 10,
      146, 89, 10, 147, 89, 10, 146, 90, 10, 147, 90, 9, 147, 91, 10, 148, 91, 9, 147, 91, 9, 148, 91, 9, 148, 92, 9, 148, 92, 8, 148, 93, 9, 149, 93, 8, 148, 94, 8, 149, 94, 8, 149, 95, 8, 150, 95, 7, 149, 96, 8, 150, 96, 7, 150, 97, 7, 150, 97,
      7, 150, 98, 7, 151, 98, 6, 150, 99, 7, 151, 99, 6, 151, 100, 6, 152, 99, 6, 151, 100, 6, 152, 100, 5, 152, 101, 6, 152, 101, 5, 152, 102, 5, 153, 102, 5, 152, 103, 5, 153, 102, 5, 152, 103, 6, 152, 102, 5, 151, 102, 6, 151, 102, 6, 151, 102,
      6, 151, 101, 6, 150, 101, 7, 150, 101, 6, 149, 101, 7, 149, 100, 7, 148, 101, 7, 148, 100, 7, 147, 100, 8, 147, 100, 8, 146, 100, 8, 147, 99, 8, 146, 99, 9, 146, 99, 8, 145, 99, 9, 145, 98, 9, 144, 99, 9, 144, 98, 9, 143, 98, 10, 143, 97, 10,
      142, 98, 10, 142, 97, 10, 142, 97, 11, 142, 97, 10, 141, 97, 11, 141, 96, 11, 140, 97, 11, 140, 96, 11, 139, 96, 12, 139, 95, 11, 138, 96, 12, 138, 95, 12, 137, 95, 13, 138, 95, 12, 137, 95, 13, 137, 94, 13, 136, 95, 13, 136, 94, 13, 135, 94,
      14, 135, 93, 13, 134, 94, 14, 134, 93, 14, 133, 93, 15, 133, 93, 14, 133, 93, 15, 133, 92, 15, 132, 92, 15, 132, 92, 15, 131, 92, 16, 131, 91, 15, 130, 92, 16, 130, 91, 16, 129, 91, 16, 129, 91, 16, 128, 91, 17, 129, 90, 17, 128, 90, 17, 128,
      90, 17, 127, 90, 18, 127, 89, 17, 126, 90, 18, 126, 89, 18, 125, 89, 18, 125, 88, 18, 124, 89, 19, 124, 88, 19, 123, 88, 19, 124, 88, 19, 123, 88, 20, 123, 87, 19, 122, 88, 20, 122, 87, 20, 121, 87, 20, 121, 86, 20, 120, 87, 21, 120, 86, 20,
      119, 86, 21, 119, 86, 21, 119, 86, 22, 119, 85, 21, 118, 85, 22, 118, 85, 22, 117, 85, 22, 117, 84, 22, 116, 85, 23, 116, 84, 22, 115, 84, 23, 115, 84, 23, 114, 84, 24, 115, 83, 23, 114, 83, 24, 114, 83, 24, 113, 83, 24, 113, 82, 24, 112, 83,
      25, 112, 82, 24, 111, 82, 25, 111, 81, 25, 110, 82, 25, 110, 81, 25, 110, 81, 26, 110, 81, 26, 109, 81, 26, 109, 80, 26, 108, 81, 27, 108, 80, 26, 107, 80, 27, 107, 79, 27, 106, 80, 27, 106, 79, 27, 105, 79, 28, 106, 79, 28, 105, 79, 28, 105,
      78, 28, 104, 79, 29, 104, 78, 28, 103, 78, 29, 103, 77, 29, 102, 78, 29, 102, 77, 29, 101, 77, 30, 101, 77, 29, 101, 77, 30, 101, 76, 30, 100, 76, 31, 100, 76, 30, 99, 76, 31, 99, 75, 31, 98, 76, 31, 98, 75, 31, 97, 75, 32, 97, 75, 31, 96,
      75, 32, 97, 74, 32, 96, 74, 33, 96, 74, 32, 95, 74, 33, 95, 73, 33, 94, 74, 33, 94, 73, 33, 93, 73, 34, 93, 72, 33, 92, 73, 34, 92, 72, 34, 91, 72, 34, 92, 72, 34, 91, 72, 35, 91, 71, 35, 90, 72, 35, 90, 71, 35, 89, 71, 36, 89, 70, 35, 88,
      71, 36, 88, 70, 36, 87, 70, 36, 87, 70, 36, 87, 70, 37, 87, 69, 37, 86, 69, 37, 86, 69, 37, 85, 69, 38, 85, 68, 37, 84, 69, 38, 84, 68, 38, 83, 68, 38, 83, 68, 38, 82, 68, 39, 83, 67, 38, 82, 67, 39, 82, 67, 39, 81, 67, 40, 81, 66, 39, 80,
      67, 40, 80, 66, 40, 79, 66, 40, 79, 65, 40, 78, 66, 41, 78, 65, 40, 78, 65, 41, 78, 65, 41, 77, 65, 42, 77, 64, 41, 76, 65, 42, 76, 64, 42, 75, 64, 42, 75, 63, 42, 74, 64, 43, 74, 63, 42, 73, 63, 43, 74, 63, 43, 73, 63, 44, 73, 62, 43, 72,
      63, 44, 72, 62, 44, 71, 62, 44, 71, 61, 44, 70, 62, 45, 70, 61, 44, 69, 61, 45, 69, 61, 45, 69, 61, 45, 69, 60, 45, 68, 60, 46, 68, 60, 46, 67, 60, 46, 67, 59, 46, 66, 60, 47, 66, 59, 46, 65, 59, 47, 65, 59, 47, 65, 59, 47, 65, 59, 47, 64,
      59, 47, 65, 59, 47, 64, 59, 47, 65, 58, 47, 64, 59, 47, 65, 58, 47, 64, 59, 47, 65, 58, 47, 64, 59, 47, 65, 58, 47, 64, 59, 47, 64, 58, 47, 64, 59, 48, 64, 58, 47, 64, 59, 48, 64, 58, 47, 64, 59, 48, 64, 58, 47, 64, 59, 48, 64, 58, 47, 63,
      59, 48, 64, 58, 47, 63, 58, 48, 64, 58, 47, 63, 58, 48, 64, 58, 47, 63, 58, 48, 64, 58, 47, 63, 58, 48, 64, 58, 47, 63, 58, 48, 63, 58, 48, 63, 58, 48, 63, 58, 48, 63, 58, 48, 63, 58, 48, 63, 58, 48, 63, 58, 48, 63, 58, 48, 63, 58, 48, 62,
      58, 48, 63, 57, 48, 62, 58, 48, 63, 57, 48, 62, 58, 48, 63, 57, 48, 62, 58, 48, 63, 57, 48, 62, 58, 48, 62, 57, 48, 62, 58, 48, 62, 57, 48, 62, 58, 49, 62, 57, 48, 62, 58, 49, 62, 57, 48, 62, 58, 49, 62, 57, 48, 62, 58, 49, 62, 57, 48, 61,
      57, 49, 62, 57, 48, 61, 57, 49, 62, 57, 48, 61, 57, 49, 62, 57, 48, 61, 57, 49, 62, 57, 48, 61, 57, 49, 61, 57, 48, 61, 57, 49, 61, 57, 49, 61, 57, 49, 61, 57, 49, 61, 57, 49, 61, 57, 49, 61, 57, 49, 61, 57, 49, 60, 57, 49, 61, 57, 49, 60,
      57, 49, 61, 56, 49, 60, 57, 49, 61, 56, 49, 60, 57, 49, 61, 56, 49, 60, 57, 49, 61, 56, 49, 60, 57, 49, 60, 56, 49, 60, 57, 50, 60, 56, 49, 60, 57, 50, 60, 56, 49, 60, 57, 50, 60, 56, 49, 60, 57, 50, 60, 56, 49, 59, 57, 50, 60, 56, 49, 59,
      56, 50, 60, 56, 49, 59, 56, 50, 60, 56, 49, 59, 56, 50, 60, 56, 49, 59, 56, 50, 60, 56, 49, 59, 56, 50, 59, 56, 50, 59, 56, 50, 59, 56, 50, 59, 56, 50, 59, 56, 50, 59, 56, 50, 59, 56, 50, 59, 56, 50, 59, 56, 50, 58, 56, 50, 59, 55, 50, 58,
      56, 50, 59, 55, 50, 58, 56, 50, 59, 55, 50, 58, 56, 50, 59, 55, 50, 58, 56, 50, 58, 55, 50, 58, 56, 50, 58, 55, 50, 58, 56, 51, 58, 55, 50, 58, 56, 51, 58, 55, 50, 58, 56, 51, 58, 55, 50, 58, 56, 51, 58, 55, 50, 57, 55, 51, 58, 55, 50, 57,
      55, 51, 58, 55, 50, 57, 55, 51, 58, 55, 50, 57, 55, 51, 58, 55, 50, 57, 55, 51, 57, 55, 50, 57, 55, 51, 57, 55, 51, 57, 55, 51, 57, 55, 51, 57, 55, 51, 57, 55, 51, 57, 55, 51, 57, 55, 51, 56, 55, 51, 57, 55, 51, 56, 55, 51, 57, 54, 51, 56,
      55, 51, 57, 54, 51, 56, 55, 51, 57, 54, 51, 56, 55, 51, 57, 54, 51, 56, 55, 51, 56, 54, 51, 56, 55, 52, 56, 54, 51, 56, 55, 52, 56, 54, 51, 56, 55, 52, 56, 54, 51, 56, 55, 52, 56, 54, 51, 55, 55, 52, 56, 54, 51, 55, 54, 52, 56, 54, 51, 55,
      54, 52, 56, 54, 51, 55, 54, 52, 56, 54, 51, 55, 54, 52, 56, 54, 51, 55, 54, 52, 55, 54, 52, 55, 54, 52, 55, 54, 52, 55, 54, 52, 55, 54, 52, 55, 54, 52, 55, 54, 52, 55, 54, 52, 55, 54, 52, 54, 54, 52, 55, 53, 52, 54, 54, 52, 55, 53, 52, 54,
      54, 52, 55, 53, 52, 54, 54, 52, 55, 53, 52, 54, 54, 52, 54, 53, 52, 54, 54, 52, 54, 53, 52, 54, 54, 53, 54, 53, 52, 54, 54, 53, 54, 53, 52, 54, 54, 53, 54, 53, 52, 54, 54, 53, 54, 53, 52, 53, 53, 53, 54, 53, 52, 53, 53, 53, 54, 53, 52, 53,
      53, 53, 54, 53, 52, 53, 53, 53, 54, 53, 52, 53, 53, 53, 53, 53, 52, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53, 53
    ];
    this.stringArr = [];
    for (var i = 0; i < colors.length; i += 3) {
      this.stringArr.push(`rgb(${colors[i]},${colors[i+1]},${colors[i+2]})`);
    }
    this.stringArr.reverse();
    this.lightFrame = 0;
    this.verifyArr = [1, 2, 3, 4];
    this.isClickReset = false;
  },
  mounted() {
    //禁止选择
    document.onselectstart = function() {
      return false;
    };
    this.TO = this.init();
    let app = this.$refs.app;
    let width = app.offsetWidth;
    let height = app.offsetHeight;
    app.style.backgroundImage = `radial-gradient(circle at ${(width-200)/2}px ${(height-200)/2}px, #635376, #111346)`;
    setTimeout(() => {
      this.isHidden = true;
    }, 2000)
  },
  computed: {
    speed() {
      return 20.2 / 100 * this.value3 + 4.8;
    }
  },
  watch: {
    input1(val) {
      if (this.verifyArr.indexOf(val / 1) == -1) {
        this.input1 = '';
      }
      this.action(1);
      if (val.length == 1) {
        this.$refs.input1.blur();
      }
    },
    input2(val) {
      if (this.verifyArr.indexOf(val / 1) == -1) {
        this.input2 = '';
      }
      this.action(1);
      if (val.length == 1) {
        this.$refs.input2.blur();
      }
    },
    value3(val) {},
    radio_checked1(val) {
      this.isShowLine = false;
      if (val) {
        this.radio_checked2 = false;
      }
      this.TO.isShowLight(val);
    },
    radio_checked2(val) {
      if (val) {
        this.radio_checked1 = false;
      }
      this.TO.isShowGun(val);
    }
  },
  methods: {
    reset() {
      this.TO.reset();
    },
    action(v) {
      if (this.isClickReset) {
        return;
      }
      if (v === 1) {
        this.isPause = true;
      } else {
        this.isPause = !this.isPause;
      }
      if (this.isPause) {
        clearTimeout(this.timer);
        this.TO.pause();
      } else {
        cancelAnimationFrame(this.timerLizi);
        this.isShowLine = false;
        let one = parseInt(this.input1);
        let two = parseInt(this.input2);
        //one为数字 two不为数字
        if (!Number.isNaN(one) && Number.isNaN(two)) {
          this.level = one;
        } else if (!Number.isNaN(one) && !Number.isNaN(two)) { //one，two都为数字
          if ((this.isBlue == 1 && one <= two) || (this.isBlue == 2 && one >= two)) {
            return;
          }
          this.level = one;
          if (this.isBlue == 1) {
            this.timer = setTimeout(() => {
              this.isShowLine = true;
              this.level = two;
              this.TO.createElectronic(this.level, this.TO.sparkle);
            }, 2000);
          }
          if (this.isBlue == 2 && this.radio_checked1) {
            if (this.lightFrame !== 0) {
              this.TO.lightAni(this.lightFrame);
            }
          } else if (this.isBlue == 2 && this.radio_checked2) {
            this.TO.move1().then(() => {
              this.TO.move2();
            }, () => {});
          }
          this.left = this.TO.calcLinePos(one, two);
        } else if (Number.isNaN(one) && Number.isNaN(two)) {}
        this.TO.createElectronic(this.level, this.TO.sparkle);
      }
    },
    pause() {
      clearTimeout(this.timer);
      this.TO.pause();
    },
    choose(v) {
      this.isShowLine = false;
      this.isBlue = v;
      this.radio_checked1 = this.radio_checked2 = false;
    },
    init() {
      let appH = document.getElementById('app');
      var viewHeight = window.innerHeight;
      appH.style.height = `${viewHeight}px`;
      var scene = null,
        camera = null,
        renderer = null,
        mainWidth = null,
        mainHeight = null,
        selectobjs = [],
        selectobj = null,
        controls = null,
        raycaster = new THREE.Raycaster(),
        plane = new THREE.Plane(),
        offset = new THREE.Vector3(),
        intersection = new THREE.Vector3(),
        mouse = new THREE.Vector2(),
        INTERSECTED = null,
        mousedownflag = false,
        isMob = /iPad|Android/g.test(navigator.userAgent);
      renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha: true,
        logarithmicDepthBuffer: true
      });
      renderer.gammaInput = true;
      renderer.gammaOutput = true;
      renderer.shadowMap.enabled = true;
      renderer.shadowMap.renderReverseSided = false;
      renderer.shadowMap.type = THREE.PCFSoftShadowMap;
      var offsetLeft = parseInt($('#renderCanvas').offset().left);
      var offsetTop = parseInt($('#renderCanvas').offset().top);
      mainWidth = $('#renderCanvas').width();
      mainHeight = $('#renderCanvas').height();
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(65, mainWidth / mainHeight, 1, 10000);
      camera.position.x = 0;
      camera.position.y = 0;
      camera.position.z = 1000;
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setClearColor(0xffffff, 0);
      renderer.setSize(mainWidth, mainHeight);
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.25;
      controls.enableZoom = true;
      controls.enableRotate = true;
      controls.enablePan = false;
      controls.minDistance = 400;
      controls.maxDistance = 1200;
      $("#renderCanvas").append(renderer.domElement);
      //渲染第二个2D场景
      var scene2 = null,
        camera2 = null,
        renderer2 = null,
        mainWidth2 = null,
        mainHeight2 = null;
      renderer2 = new THREE.WebGLRenderer({
        antialias: true,
        alpha: true
      });
      mainWidth2 = $('#renderCanvas2').width();
      mainHeight2 = $('#renderCanvas2').height();
      scene2 = new THREE.Scene();
      camera2 = new THREE.PerspectiveCamera(45, mainWidth2 / mainHeight2, 9, 10000);
      camera2.position.x = 0;
      camera2.position.y = 0;
      camera2.position.z = 400;
      renderer2.setPixelRatio(window.devicePixelRatio);
      renderer2.setClearColor(0xffffff, 0);
      renderer2.setSize(mainWidth2, mainHeight2);
      $("#renderCanvas2").append(renderer2.domElement);
      var dirLight1 = new THREE.DirectionalLight(0xf0f0f0, 0.5);
      dirLight1.position.set(600, 600, 300);
      var dirLight2 = new THREE.DirectionalLight(0xf0f0f0, 0.5);
      dirLight2.position.set(-600, -600, -300);
      scene.add(dirLight1, dirLight2);
      // var dirLight1 = new THREE.DirectionalLight(0xffffff, 0.5);
      // dirLight1.position.set(150, 250, 150);
      // scene.add(dirLight1);
      // var dirLight2 = new THREE.DirectionalLight(0xffffff, 0.5);
      // dirLight2.position.set(-150, -250, -150);
      // scene.add(dirLight2);
      // var hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.56);
      // hemiLight.color.setHSL(0.6, 1, 0.6);
      // hemiLight.groundColor.setHSL(0.095, 1, 0.75);
      // hemiLight.position.set(0, 0, 0);
      // scene.add(hemiLight);
      var ambientlight = new THREE.AmbientLight(0x666666);
      scene.add(ambientlight);
      // var hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);
      // // hemiLight.color.setHSL( 0.6, 1, 0.6 );
      // // hemiLight.groundColor.setHSL( 0.095, 1, 0.75 );
      // hemiLight.position.set(0, 50, 0);
      // scene.add(hemiLight);
      //
      // var dirLight = new THREE.DirectionalLight(0xffffff, 0.3);
      // dirLight.color.setHSL(0.1, 1, 0.95);
      // dirLight.position.set(-1, 1.75, 1);
      // dirLight.position.multiplyScalar(30);
      // scene.add(dirLight);
      // dirLight.castShadow = true;
      // dirLight.shadow.mapSize.width = 2048;
      // dirLight.shadow.mapSize.height = 2048;
      // var d = 50;
      // dirLight.shadow.camera.left = -d;
      // dirLight.shadow.camera.right = d;
      // dirLight.shadow.camera.top = d;
      // dirLight.shadow.camera.bottom = -d;
      // dirLight.shadow.camera.far = 3500;
      // dirLight.shadow.bias = -0.0001;
      // var dirLight1 = dirLight.clone();
      // dirLight1.position.set(1, -1.75, -1);
      // // dirLight1.color.setHSL( 0.6, 1, 0.6);
      // dirLight1.intensity = 0.3;
      // scene.add(dirLight1)
      let radiusArr = [20, 75, 110, 135, 150];
      let colorArr = ['#F95755', '#F9CA51', '#FFED82', '#69B6B8', '#4980C7'];
      let electronic3D = null;
      let electronic2D = null;
      let max_limit = 3;
      let elecTimer = null;
      let commonObj = {}; //存放物体的集合
      let energy = 0;
      let level = 0; //决定电子在那个轨道面
      let lightGroup = null;
      //创建原子核
      var createHydrogenModel = (radiusArr, scene, num) => {
        let group = new THREE.Group();
        let sphere = null;
        if (num == 1) {
          for (let [index, value] of radiusArr.entries()) {
            sphere = common.createSphere(value, Math.PI * 2, colorArr[index], 0.25);
            group.add(sphere);
          }
        } else {
          for (let [index, value] of radiusArr.entries()) {
            if (index != 0) {
              let vertices = [];
              for (let i = 0; i < 361; i += 6) {
                vertices.push(common.vec3(value * Math.cos(i * Math.PI / 180), value * Math.sin(i * Math.PI / 180), 0));
              }
              sphere = common.createLineMesh(vertices, 3, 1, '#fff');
            } else {
              sphere = common.createCircle([0, 0, 0], value, colorArr[index]);
            }
            group.add(sphere);
          }
        }
        scene.add(group);
      }
      //获取球体上随机一点位置
      var getRandomPos3D = (r) => {
        let angle1 = common.radian(Math.random() * 360);
        let angle2 = common.radian(Math.random() * 360);
        let x, y, z, y1;
        x = r * sin(angle1) * cos(angle2);
        y = r * sin(angle1) * sin(angle2);
        z = r * cos(angle1);
        y1 = r * sin(angle1);
        return [
          [x, y, z],
          [z, y1, 1]
        ];
      }
      //获取圆上随机一点位置
      var getRandomPos2D = (r) => {
        let angle = Math.random() * 360;
        let x, y, z;
        x = r * cos(common.radian(angle));
        y = r * sin(common.radian(angle));
        z = 5;
        return [x, y, z];
      }
      //随机某一轨道面半径
      var randomR = (level) => {
        // let r = (radiusArr[level] - radiusArr[level - 1] - ELECTRONIC_RADIUS * 3) * Math.random() + radiusArr[level - 1] + ELECTRONIC_RADIUS;
        let r = radiusArr[level];
        return r;
      }
      //创建电子，回调判定是否电子一直闪现
      var createElectronic = (level, callback) => {
        clearTimeout(elecTimer);
        if (electronic3D != null) {
          scene.remove(electronic3D);
          scene2.remove(electronic2D);
        }
        electronic3D = common.createSphere(ELECTRONIC_RADIUS, Math.PI * 2, '#0f0', 1);
        electronic2D = common.createCircle([0, 0, 0], ELECTRONIC_RADIUS, '#0f0', 1);
        electronic3D.material.depthTest = false;
        setPos(level);
        scene.add(electronic3D);
        scene2.add(electronic2D)
        if (callback) {
          callback(level);
        }
      }
      //暂停场景
      var pause = () => {
        //如果暂停的时候电子显示就清除定时器，电子隐藏就创建电子;
        if (electronic3D.visible) {
          clearTimeout(elecTimer);
        } else {
          createElectronic(this.level);
        };
        //如果暂停就清除粒子运动的定时器
        //如何灯光存在暂停就停止灯光动画
        if (this.radio_checked2 || this.radio_checked1) {
          cancelAnimationFrame(this.timerLizi);
        }
      }
      //设置两个场景电子的位置
      var setPos = (level) => {
        let r = randomR(level);
        let posArr = getRandomPos3D(r)
        electronic3D.position.set(...posArr[0]);
        electronic2D.position.set(...posArr[1]);
      }
      //电子闪现
      function sparkle(level) {
        electronic3D.visible = !electronic3D.visible;
        electronic2D.visible = !electronic2D.visible;
        if (electronic3D.visible) {
          setPos(level);
        }
        elecTimer = setTimeout(() => {
          sparkle(level);
        }, 100);
      }
      //创建灯光
      var createCone = (topRadius, endRadius, height, color = '#ff0', opacity = 0.5, segment = 36) => {
        let light;
        var geometry = new THREE.CylinderGeometry(topRadius, endRadius, height, segment);
        var material = new THREE.MeshBasicMaterial({
          color: color,
          transparent: true,
          opacity: opacity
        });
        light = new THREE.Mesh(geometry, material);
        light.rotation.z = Math.PI / 2;
        return light;
      }
      //改变灯光颜色
      var changeLightingColor = (color) => {
        commonObj.lighting.material.color.set(color);
      }
      //改变灯光透明度
      var changeLightingOpacity = (opacity) => {
        commonObj.lighting.material.opacity = opacity;
      }
      // 灯光动画
      var lightAni = (scale = 0, isClick = false) => {
        if (isClick && scale) {
          return;
        }
        let one = this.input1;
        let two = this.input2;
        if (!this.radio_checked1 || !Number.isNaN(one) && !Number.isNaN(two) && one >= two) {
          return;
        }
        this.isPause = false;
        if (commonObj.lightGroup != null) {
          scene.remove(commonObj.lightGroup);
          scene2.remove(commonObj.lightGroup2);
        }
        commonObj.lightGroup = new THREE.Group();
        commonObj.lightGroup2 = new THREE.Group();
        commonObj.lightGroup.position.x = commonObj.lightGroup2.position.x = lightPosX;
        scene.add(commonObj.lightGroup);
        scene2.add(commonObj.lightGroup2);
        let light = null,
          light2 = null;
        let heightStep = (550 - radiusArr[radiusArr.length - 1]);
        let thiz = this;
        let color = this.stringArr[calcWave(this.input1, this.input2)];
        light = createCone(1, 157, heightStep, color);
        light2 = light.clone();
        light.scale.set(scale, scale, scale);
        light2.scale.set(scale, scale, 0.1);
        commonObj.lightGroup.add(light);
        commonObj.lightGroup2.add(light2);
        this.level = one;
        createElectronic(this.level, sparkle);

        function increase() {
          if (scale > 1) {
            cancelAnimationFrame(thiz.timerLizi);
            setTimeout(() => {
              thiz.level = thiz.input2;
              thiz.lightFrame = 0;
              thiz.isShowLine = true;
              createElectronic(thiz.level, sparkle);
              thiz.left =calcLinePos(one, two);
            })
            return;
          }
          scale += 0.01;
          thiz.lightFrame = scale;
          light.scale.set(scale, scale, scale);
          light2.scale.set(scale, scale, 0.1);
          light.position.x = light2.position.x = heightStep * scale / 2;
          thiz.timerLizi = requestAnimationFrame(increase);
        }
        increase();
      }
      //计算光的能量值
      var lightPower = (v) => {
        let x = H * C * Math.pow(10, 10);
        // console.log(x);
        let y = v * Math.pow(10, 10);
        energy = x / y;
        energy = energy.toFixed(2);
      }
      //计算波长
      var calcWave = (first, end) => {
        let x = H * C;
        let y = arrE[first] - arrE[end];
        let res = x / y * Math.pow(10, 9);
        res = Math.abs(Math.ceil(res));
        return res;
      }
      //计算波长线段在50-2000区间的位置
      var calcLinePos = (first, end) => {
        let wave = calcWave(first, end);
        let left = `${100*(wave-50)/1950}%`;
        console.log(left);
        return left;
      }
      //加载粒子发射器模型
      let loader = new THREE.GLTFLoader();
      let gun = null;
      let dianziqiangArr = [];
      loader.load('./static/obj/dinengdianziqiang.gltf', (data) => {
        loadLight();
        gun = data.scene.children[0];
        gun.visible = false;
        gun.position.set(-600, 0, 0);
        gun.scale.set(2.5, 2.5, 2.5);
        gun.children.forEach(value => {
          value.material = new THREE.MeshPhongMaterial({
            // color: '#ccc'
            map: new THREE.TextureLoader().load('static/UI/lvban.jpg'),
            emissive: '#0c0c0c',
            specular: '#ccc',
            shininess: 40
          });
          dianziqiangArr.push(value);
          // selectobjs.push(value);
        })
        // selectobjs.push(gun.children[0],gun.children[1],gun.children[2]);
        scene.add(gun);
      }, undefined, function(error) {
        console.error(error);
      });
      let light = null;
      var loadLight = () => {
        let loader1 = new THREE.GLTFLoader();
        loader1.load('./static/obj/shoudiantong.gltf', (data) => {
          light = data.scene.children[0];
          light.rotation.z = -Math.PI / 2;
          light.visible = false;
          light.position.set(-640, 0, 0);
          // light.scale.set(1,1,1);
          light.children.forEach(value => {
            value.material = new THREE.MeshPhongMaterial({
              // color: '#ccc'
              map: new THREE.TextureLoader().load('static/UI/lvban.jpg'),
              emissive: '#0c0c0c',
              specular: '#ccc',
              shininess: 40
            });
          })
          light.scale.set(2, 2, 2);
          scene.add(light);
        }, null, function(error) {
          console.error(error);
        });
      }
      //是否显示灯光
      var isShowLight = (val) => {
        if (!val) {
          commonObj.touchLight.position.x = 2000;
          cancelAnimationFrame(this.timerLizi);
          scene.remove(commonObj.lightGroup);
          scene2.remove(commonObj.lightGroup2);
          light.visible = false;
        } else {
          light.visible = true;
          commonObj.touchLight.position.x = -570;
        }
      }
      //是否显示隐藏枪
      var isShowGun = (bool) => {
        gun.visible = bool;
        if (!bool) {
          commonObj.touchGun.position.x = 2000;
          cancelAnimationFrame(this.timerLizi);
          if (ball != null) {
            ball.removeToScene(scene);
            ball2D.removeToScene(scene2);
            ball = null;
            ball2D = null;
          }
        } else {
          commonObj.touchGun.position.x = -600;
        }
      }
      //创建粒子类
      class Ball {
        constructor(x, y, speed, rub, x1, y1, z1) {
          this.el = common.createSphere(ELECTRONIC_RADIUS * 1.5, Math.PI * 2, '#0f0', 1);
          this.x = x;
          this.y = y;
          this.z = 0;
          this.rub = rub;
          this.speed = speed;
          this.x1 = x1;
          this.y1 = y1;
          this.z1 = z1;
          this.isImpact = false;
          this.num = 0
          this.step = Math.hypot(this.x1, this.y1, this.z1);
        }
        setPosition() {
          this.el.position.set(this.x, this.y, this.z);
          return this;
        }
        //根据物体匀加速公式
        move() {
          if (this.isImpact) {
            this.x += this.x1;
            this.y += this.y1;
            this.z += this.z1;
            this.num += this.step;
          } else {
            this.x += this.speed;
          }
          return this;
        }
        addToScene(scene) {
          scene.add(this.el);
          return this;
        }
        removeToScene(scene) {
          scene.remove(this.el);
        }
        //判断是否要从场景中删除电子
        isRemoveBall(step, level) {
          if (step == 1 && this.x >= -radiusArr[radiusArr.length - 1] - ELECTRONIC_RADIUS) {
            this.isImpact = true;
            if (level && this.rub != 1) {
              createElectronic(level, sparkle);
            }
          } else if (step == 2) {}
        }
      }
      //创建2D粒子类
      class Ball2D extends Ball {
        constructor(x, y, startSpeed, rub, x1, y1, z1, y2) {
          super(x, y, startSpeed, rub);
          this.el = common.createCircle([0, 0, 0], ELECTRONIC_RADIUS*1.5, '#0f0', 1);
          this.x1 = z1;
          this.y1 = y2;
        }
        move() {
          if (this.isImpact) {
            this.x += this.x1;
            this.y += this.y1;
          } else {
            this.x += this.speed;
          }
          return this;
        }
      }
      //粒子撞击原子核动画
      let ball = null;
      let ball2D = null;
      //因为光照和粒子只会出现一个，光照动画和粒子动画公用一个定时器变量
      //粒子撞击原子核之前的动画
      var move1 = () => {
        let thiz = this;
        return new Promise((resolve, reject) => {
          if (ball == null) {
            return reject();
          }

          function move() {
            if (ball.x > -154 || ball.isImpact) {
              ball.isImpact = true;
              ball2D.isImpact = true;
              cancelAnimationFrame(thiz.timerLizi);
              resolve();
              return;
            } else {
              ball.move().setPosition();
              ball2D.move().setPosition();
            }
            thiz.timerLizi = requestAnimationFrame(move);
          }
          move();
        });
      }
      //粒子碰撞后动画
      var move2 = () => {
        let thiz = this;
        return new Promise((resolve, reject) => {
          function move() {
            if (ball.num > 500) {
              cancelAnimationFrame(thiz.timerLizi);
              ball.removeToScene(scene);
              ball2D.removeToScene(scene2);
              ball = null;
              ball2D = null;
              resolve();
              return;
            } else {
              ball.move().setPosition();
              ball2D.move().setPosition();
            }
            thiz.timerLizi = requestAnimationFrame(move);
          }
          move();
        })
      }
      var createObj = () => {
        //创建3D氢原子核模型
        createHydrogenModel(radiusArr, scene, 1);
        //创建2D氢原子核模型
        createHydrogenModel(radiusArr, scene2, 2);
        //随机在一个轨道面出现
        this.level = Math.ceil(Math.random() * 3 + 1);
        createElectronic(this.level, sparkle);
        //创建电子枪触控放大区域
        commonObj.touchGun = common.createSphere(70, Math.PI * 2, '#0f0', 0, 8);
        commonObj.touchGun.position.set(2000, 0, 0);
        commonObj.touchGun.name = "gun";
        selectobjs.push(commonObj.touchGun);
        scene.add(commonObj.touchGun);
        commonObj.touchLight = commonObj.touchGun.clone();
        commonObj.touchLight.name = 'light';
        selectobjs.push(commonObj.touchLight);
        scene.add(commonObj.touchLight);
      }
      createObj();
      let count = 0;
      var animate = () => {
        requestAnimationFrame(animate);
        count= ++count%3;
        if(count){
          return;
        }
        
        renderer.clear();
        renderer.render(scene, camera);
        renderer2.clear();
        renderer2.render(scene2, camera2);
      };
      animate();
      //事件
      var liziAnimate = () => {
        let one = this.input1;
        let two = this.input2;
        if (!this.radio_checked2 || ball != null || !Number.isNaN(one) && !Number.isNaN(two) && one >= two) {
          return;
        }
        this.isPause = false;
        //创建粒子实例
        let rub = this.speed < Math.abs(arrE[one] - arrE[two]) ? 1 : (10 - Math.abs(one - two) * 3) / 10;
        let angle1 = common.radian(Math.random() * 360);
        let angle2 = common.radian(Math.random() * 360);
        let x1 = rub * this.speed * sin(angle1) * cos(angle2);
        let y1 = rub * this.speed * sin(angle1) * sin(angle2);
        let z1 = rub * this.speed * cos(angle1);
        let y2 = this.speed * rub * sin(angle1);
        ball = new Ball(-530, 0, this.speed, rub, x1, y1, z1);
        ball.setPosition().addToScene(scene);
        ball2D = new Ball2D(-530, 0, this.speed, rub, x1, y1, z1, y2);
        ball2D.setPosition().addToScene(scene2);
        move1().then(() => {
          createElectronic(two, sparkle);
          move2();
        }, () => {});
        this.level = one;
        createElectronic(this.level, sparkle);
      }
      var limitNum = 0;
      var onDocumentMouseDown = (event) => {
        event.preventDefault();
        var offsetLeft = parseInt($('#renderCanvas').offset().left);
        var offsetTop = parseInt($('#renderCanvas').offset().top);
        var mouse = {};
        mouse.x = ((event.clientX - offsetLeft) / mainWidth) * 2 - 1;
        mouse.y = -((event.clientY - offsetTop) / mainHeight) * 2 + 1;
        raycaster.setFromCamera(mouse, camera);
        var intersects = raycaster.intersectObjects(selectobjs);
        if (intersects.length > 0) {
          selectobj = intersects[0].object;
          // controls.enableRotate = false;
          renderer.domElement.addEventListener('mouseup', onDocumentMouseUp, false);
          renderer.domElement.addEventListener('mousemove', onDocumentMouseMove, false);
        }
      };
      var onDocumentMouseMove = (event) => {
        event.preventDefault();
        limitNum++;
      }
      var onDocumentMouseUp = (event) => {
        event.preventDefault();
        // event.stopPropagation();
        // controls.enableRotate = true;
        if (limitNum < 5) {
          if (selectobj.name == "gun" && this.radio_checked2) {
            liziAnimate();
          } else if (selectobj.name == "light" && this.radio_checked1) {
            lightAni(this.lightFrame, true);
          }
        }
        limitNum = 0;
        renderer.domElement.removeEventListener('mousemove', onDocumentMouseMove);
        renderer.domElement.removeEventListener('mouseup', onDocumentMouseUp);
      }
      var onDocumentTouchStart = (event) => {
        event.preventDefault();
        // event.stopPropagation();
        this.$refs.input1.blur();
        this.$refs.input2.blur();
        var offsetLeft = parseInt($('#renderCanvas').offset().left);
        var offsetTop = parseInt($('#renderCanvas').offset().top);
        if (event.touches.length === 1) {
          var mouse = {};
          mouse.x = ((event.touches[0].pageX - offsetLeft) / mainWidth) * 2 - 1;
          mouse.y = -((event.touches[0].pageY - offsetTop) / mainHeight) * 2 + 1;
          raycaster.setFromCamera(mouse, camera);
          var intersects = raycaster.intersectObjects(selectobjs);
          if (intersects.length > 0) {
            // controls.enableRotate = false;
            selectobj = intersects[0].object;
            renderer.domElement.addEventListener('touchend', onDocumentTouchEnd, false);
            renderer.domElement.addEventListener('touchmove', onDocumentTouchMove, false);
            // liziAnimate();
          }
        }
      };
      var onDocumentTouchMove = (event) => {
        event.preventDefault();
        limitNum++;
      };
      var onDocumentTouchEnd = (event) => {
        event.preventDefault();
        // controls.enableRotate = true;
        if (limitNum < 5) {
          if (selectobj.name == "gun" && this.radio_checked2) {
            liziAnimate();
          } else if (selectobj.name == "light" && this.radio_checked1) {
            lightAni(this.lightFrame, true);
          }
        }
        limitNum = 0;
        renderer.domElement.removeEventListener('touchmove', onDocumentTouchMove);
        renderer.domElement.removeEventListener('touchend', onDocumentTouchEnd);
      };
      renderer.domElement.addEventListener('mousedown', onDocumentMouseDown, false);
      renderer.domElement.addEventListener('touchstart', onDocumentTouchStart, false);
      let resizeTimer = null;
      window.addEventListener('resize', () => {
        if (!isMob) {
          clearTimeout(resizeTimer);
          resizeTimer = setTimeout(() => {
            mainWidth = $('#renderCanvas2').width();
            mainHeight = $('#renderCanvas2').height();
            camera2.aspect = mainWidth / mainHeight;
            camera2.updateProjectionMatrix();
            renderer2.setSize(mainWidth, mainHeight);
            mainWidth = $('#renderCanvas').width();
            mainHeight = $('#renderCanvas').height();
            camera.aspect = mainWidth / mainHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(mainWidth, mainHeight);
          }, 200)
        } else {
          let H = $(window).height();
          this.hiddenCtrl = H > 300 ? 1 : 0;
        }
      });
      var resetWidget = () => {
        this.isClickReset = true;
        this.isShowLine = false;
        this.isPause = false;
        cancelAnimationFrame(this.timerLizi);
        clearTimeout(this.timer);
        clearTimeout(elecTimer);
        this.level = Math.ceil(Math.random() * 3 + 1);
        createElectronic(this.level, sparkle);
        this.choose(1);
        this.input1 = this.input2 = '';
        this.radio_checked1 = false;
        this.radio_checked2 = false;
        this.pre_radio_checked = 0;
        this.value3 = 0;
        camera.position.set(0, 0, 1000);
        camera.lookAt(0, 0, 0);
        setTimeout(() => {
          this.isClickReset = false;
        }, 60);
      };
      var TO = function() {
        return {
          reset: resetWidget,
          createElectronic,
          changeLightingColor,
          changeLightingOpacity,
          lightPower,
          sparkle,
          pause,
          isShowGun,
          lightAni,
          isShowLight,
          calcLinePos,
          move1,
          move2,
        }
      }
      return TO();
    },
  },
}

</script>
<style>
* {
  margin: 0;
  padding: 0;
}

li {
  list-style: none;
}

input,
button {
  outline: none;
  -webkit-appearance: none;
  border-radius: 0;
}


/*盒模型，padding尺寸不用再减去*/

*,
*:before,
*:after {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  -webkit-tap-highlight-color: transparent;
}

html,
body,
#app {
  width: 100%;
  /*height: 100%;*/
  overflow: hidden;
  font-family: "PingFang SC", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
  background-color: #fff;
  display: flex;
}

#app {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.noselect {
  -webkit-touch-callout: none;
  /* iOS Safari */
  -webkit-user-select: none;
  /* Chrome/Safari/Opera */
  -khtml-user-select: none;
  /* Konqueror */
  -moz-user-select: none;
  /* Firefox */
  -ms-user-select: none;
  /* Internet Explorer/Edge */
  user-select: none;
  /* Non-prefixed version, currently not supported by any browser */
}


/*内容区*/

.container {
  /*width: 100%;
  height: 100%;
  float: left;*/
  flex-grow: 1;
  position: relative;
  overflow: hidden;
}

.container h3 {
  font-size: 24px;
  color: #fff;
  line-height: 1.0;
  padding: 24px;
  position: absolute;
  top: 0;
  z-index: 999;
  font-weight: normal;
  background-color: transparent;
}

#renderCanvas {
  overflow: hidden;
  width: 100%;
  height: 100%;
  outline: none;
  position: absolute;
  top: 0;
  /*background-image: -webkit-radial-gradient(circle at center, #635376, #111346);*/
  /*background-image: radial-gradient(circle at center, #635376, #111346);*/
}

canvas {
  position: absolute;
  overflow: hidden;
}

.aside_reset {
  margin: 20px 10px;
  float: right;
  background: #fff !important;
}

.app_aside {
  /*overflow: hidden;*/
  /*position: absolute;*/
  position: relative;
  /*right: 0;*/
  width: 220px;
  background-color: transparent;
  height: 100%;
  z-index: 888;
  /*box-shadow: -0.5px 0 0 rgba(0, 0, 0, 0.12);*/
  /*background-image: -webkit-linear-gradient(to right, #635376, #111346);*/
  /*background-image: linear-gradient(to right, #635376, #111346);*/
  /*background: #111346;*/
}

.btn_space {
  padding: 72px 10px 10px;
  width: 100%;
  height: 100%;
  background-color: transparent;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.top {
  /*height:188px;*/
  overflow: hidden;
}

.btn_space>.top>div {
  margin-bottom: 5px;
}

.btn_space .uiSlider.ui-box {
  /*background: rgba(74, 74, 74, .6);*/
  padding: 0 12px !important;
}

.uiSlider .vue-slider::after {
  background: rgba(0, 0, 0, .24);
}

#slider1 {
  /*width:220px !important;*/
  margin-top: -10px;
}

#slider1.uiSlider .vue-slider {
  background-color: rgba(0, 0, 0, 0);
}

#slider1.uiSlider .vue-slider::after {
  background-image: linear-gradient(90deg, #353535 0%, #3B2F41 11%, #670599 22%, #07296E 33%, #0169F6 44%, #00AD07 55%, #FFF900 66%, #FB8E01 77%, #CE0700 88%, #210000 100%);
  border: 2px solid rgba(255, 255, 255, 0.77);
  border-radius: 5px;
  height: 20px;
  /*transform: scale(-1);*/
  margin-top: -20px;
}

#slider1.uiSlider .ui-dot {
  margin-top: -8px;
}

#slider1 .ui-piecewise,
#slider1 .vue-slider-process {
  display: none;
}

#slider1.uiSlider .ui-dot .dotTxt {
  width: 8px;
  height: 26px;
  background: #FFFFFF !important;
  border: 0 solid rgba(151, 151, 151, 0.42);
  box-shadow: 0 2px 4px 0 rgba(125, 125, 125, 0.50);
  border-radius: 3px;
  margin-top: 4px;
}

.uiSlider .ui-title {
  color: #fff !important;
}

#app .aside_reset {
  position: fixed;
  right: 0;
  top: 0;
}

.uiSlider .ui-dot .dotTxt {
  background: #707070 !important;
  border: 0 solid rgba(0, 0, 0, 0.06) !important;
  box-shadow: 0 2px 6px 0 rgba(224, 224, 224, 0.24) !important;
}

#slider1 .ui-toolTip-top.ui-toolTip-wrap {
  display: block !important;
}

.illumination,
.speed {
  position: relative;
}

.bg {
  background: rgba(74, 74, 74, 0.6);
  border-radius: 6px;
  /*background-color: #ffffff;*/
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.08);
  border: solid 0.5px rgba(0, 0, 0, 0.06);
}

.illumination {
  /*padding:0 10px;*/
}

.illumination:after {
  content: '';
  width: 90%;
  margin: 0 auto;
  height: 1px;
  position: absolute;
  left: 0;
  right: 0;
  top: 42px;
  background: #727272;
}

.btn {
  position: absolute;
  background: #6059A2;
  width: 60px;
  height: 60px;
  left: 0;
  transform: translateX(-100%);
  border-radius: 50%;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}

.play {
  bottom: 15px;
}

.pause {
  bottom: 85px;
}

.btn img {
  width: 18px;
  height: 20px;
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  margin: auto;
}

.play:active,
.pause:active {
  border: 2px solid #0ff;
}

.slider2 .vue-slider {
  margin-top: 20px !important;
}

.slider2-wrap {
  display: flex;
}

.slider2-wrap .text {
  margin-bottom: 0;
  white-space: nowrap;
  margin-top: 10px;
  color: #fff;
  /*margin-right:15px;*/
  margin-left: 10px;
}

.inputWrap {
  height: 40px;
  display: flex;
  color: #fff;
  justify-content: space-between;
  margin-bottom: 10px;
}

.inputWrap div {
  width: 95px;
  line-height: 40px;
  text-align: center;
}

.inputWrap input {
  background: transparent;
  border: none;
  border-bottom: 1px solid #fff;
  text-align: center;
  width: 50px;
  font-size: 14px;
  color: #fff;
}

.spectrum {
  position: relative;
  padding: 3px 10px;
  color: #fff;
}

.spectrum .title {
  text-align: center;
  line-height: 30px;
}

.linearWarp {
  padding: 10px 0;
  position: relative;
}

.linearWarp .line {
  position: absolute;
  height: 90%;
  width: 1px;
  left: 0;
  top: 0;
  background: #F8E71C;
}

.linear {
  background-image: linear-gradient(90deg, #353535 0%, #3B2F41 11%, #670599 22%, #07296E 33%, #0169F6 44%, #00AD07 55%, #FFF900 66%, #FB8E01 77%, #CE0700 88%, #210000 100%);
  /*background-clip: content-box;*/
  border: 2px solid rgba(255, 255, 255, 0.77);
  border-radius: 5px;
  height: 20px;
}

.lineArrow {
  height: 4px;
  position: relative;
  background: #fff;
  opacity: 0.5;
}

.number {
  display: flex;
  justify-content: space-between;
}

.lineArrow::after {
  content: '';
  position: absolute;
  height: 0;
  width: 0;
  right: -8px;
  top: -2px;
  border: 4px solid transparent;
  border-left: 10px solid #fff;
}

.spectrum span {
  font-size: 10px;
  display: inline-block;
  opacity: 0.5;
}

#renderCanvas2 {
  position: absolute;
  top: 20px;
  left: 0;
  width: 20vw;
  height: 25vh;
  transform: translateX(-100%);
  border-radius: 6px;
  /*box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.25);*/
}

.keyhack {
  position: fixed;
  right: 0;
  bottom: -50px;
}

.explain {
  text-align: center;
  line-height: 1.5;
  color: #fff;
  transition: all 0.5s;
}

</style>
